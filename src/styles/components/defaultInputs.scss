@use 'sass:math';

// Variables
$pad: 1rem;

// Mixins
// Default styles for form elements
@mixin defaultStyles() {
    -webkit-appearance: none;
    appearance: none;

    // Font properties
    font: inherit;
    
    // Text properties
    text-decoration: inherit;
    text-transform: inherit;
    text-rendering: auto;
    text-align: inherit;
    text-align-last: inherit;

    // Layout properties
    direction: inherit;
    vertical-align: inherit;

    // Advanced text properties
    unicode-bidi: inherit;
    unicode-range: inherit;
    text-indent: inherit;
    letter-spacing: inherit;
    word-spacing: inherit;
    white-space: inherit;
    -webkit-rtl-ordering: inherit;
}

// Main styling for form elements
@mixin mainStyles() {
    padding: math.div($pad, 2);
    max-height: 100%;

    // Visual properties
    background-color: var(--bg);
    color: var(--color);
    border: solid 1px var(--middle-color);
    border-radius: $pad;
    text-align: center;
}

// Text input styling
@mixin textStyles() {
    min-width: 200px;
    
    &:is(textarea) {
        resize: vertical;
        @supports (field-sizing: content) {
            field-sizing: content;
            resize: none;
        }
    }
}

// Button styling
@mixin buttonStyles() {
    min-width: 100px;
    width: fit-content;
    cursor: pointer;
}

// Checkbox and radio styling
@mixin checkboxRadio() {
    border: solid 1px gray;
    aspect-ratio: 1;
    min-height: 1em;

    &:checked {
        appearance: auto;
        border-radius: inherit;
        border-style: solid;
    }
}

// Placeholder styles
::placeholder, 
:placeholder-shown, 
:-moz-placeholder, 
::-moz-placeholder, 
:-ms-input-placeholder, 
::-webkit-input-placeholder {
    color: inherit;
}

// Form components
.formGroup {
    position: relative;
    padding-top: 0.5lh;
    display: flex;
    flex-direction: column;

    // Label styling
    > label:not(.file label) {
        @include mainStyles();

        position: absolute;
        translate: 1em -0.5lh;
        box-sizing: border-box;
        padding: 0 $pad;
        width: fit-content;
        text-align: left;
    }
}

// Form elements
label, 
fieldset, 
legend, 
datalist, 
output, 
option, 
optgroup {
    @include defaultStyles();
}

// Input types
input {
    // // Text input styling
    // &[type="text"],
    // &[type="password"],
    // &[type="email"],
    // &[type="search"],
    // &[type="tel"],
    // &[type="url"],
    // &[type="number"],
    // &[type="date"],
    // &[type="datetime-local"],
    // &[type="month"],
    // &[type="time"],
    // &[type="week"] {
    //     @include defaultStyles();
    //     @include mainStyles();
    //     @include textStyles();
    // }

    // Checkbox styling
    &[type="checkbox"] {
        @include defaultStyles();
        @include checkboxRadio();
        border-radius: 0.15em;
    }
    
    // Radio button styling
    &[type="radio"] {
        @include defaultStyles();
        @include checkboxRadio();
        border-radius: 50%;
    }
    
    // Image input styling
    &[type="image"] {
        @include defaultStyles();
    }

    // Text-based inputs
    &[type="date"], 
    &[type="datetime-local"], 
    &[type="month"], 
    &[type="time"], 
    &[type="week"], 
    &[type="email"], 
    &[type="number"], 
    &[type="password"], 
    &[type="search"], 
    &[type="tel"], 
    &[type="text"], 
    &[type="url"] {
        @include defaultStyles();
        @include mainStyles();
        @include textStyles();
    }
}

// Textarea styling
textarea {
    @include defaultStyles();
    @include mainStyles();
    @include textStyles();
}

// Buttons
button,
input[type="button"],
input[type="submit"], 
input[type="reset"],
input[type="color"],
label:has(+ input[type="file"]) {
    @include defaultStyles();
    @include mainStyles();
    @include buttonStyles();
}

// File input
.formGroup .file {
    display: flex;
    flex-direction: row-reverse;
}

.file input[type="file"] {
    display: none;
}

input[type="file"] {
    @include defaultStyles();
}

input[type="color"] {
    min-height: 40px;
    min-width: 10px;
}

// Select elements
select {
    @include defaultStyles();
    @include mainStyles();
    @include textStyles();
    appearance: base-select;
}

option {
    @include defaultStyles();
    @include mainStyles();
    @include textStyles();
}

optgroup {
    @include defaultStyles();
    @include mainStyles();
    @include textStyles();
}