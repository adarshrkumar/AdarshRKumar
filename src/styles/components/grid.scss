// Grid variables
$gap: 2rem;
$padding: 1rem;
$min: 12rem;

// Grid frame styles
.grid .frame {
    $ar: 2;
    box-sizing: border-box;

    // Size and aspect ratio
    max-width: 100%;
    aspect-ratio: var(--ar, $ar);

    // Background properties
    background-position: center;
    background-repeat: no-repeat;
    background-size: contain;

    // Border styling
    border: solid 1px var(--color);
    border-radius: 1rem;
}

// Main grid layout
.grid:not(.lite) {
    // Grid properties
    display: grid;
    gap: $gap;
    margin-inline: auto;
    max-width: max(100%, var(--min, 1000px));
    justify-content: center;

    // Grid template columns with browser compatibility
    grid-template-columns: repeat(auto-fit, minmax(var(--min, $min), var(--max, 1fr))); // Old browsers (no "min()")
    grid-template-columns: repeat(auto-fit, minmax(min(var(--min, $min), var(--max, 100%)), var(--max, 1fr))); // New browsers (yes "min()")

    // Commented out advanced grid logic for specific item counts
    // @for $i from 1 through 3 {
    //     // Only $i
    //     &:has(
    //         .item:nth-last-child(n + $i):nth-last-child(-n + $i):first-child,
    //         .item:nth-last-child(n + $i):nth-last-child(-n + $i):first-child ~ .item
    //     ) {
    //         grid-template-columns: repeat($i + 2, minmax(0, 1fr)); // Old browsers (no "min()")
    //         grid-template-columns: repeat($i + 2, minmax(min(0, 100%), 1fr)); // New browsers (yes "min()")

    //         .item {
    //             &:first-child:not(:last-child) {
    //                 grid-column: 2 / 3;
    //             }
    //             &:last-child:not(:first-child) {
    //                 grid-column: -3 / -2;
    //             }
    //             &:first-child:last-child {
    //                 grid-column: 2 / -2;
    //             }
    //             &:nth-child(2):not(:first-child, :last-child) {
    //                 grid-column: 3 / -3;
    //             }
    //         }
    //     }
    // }
}

// Grid items
.item {
    // Layout properties
    box-sizing: border-box;
    padding: $padding;
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: $padding;

    // Visual properties
    background: var(--middle-color);
    color: inherit;
    border-radius: $gap;
    text-decoration: inherit;

    // Item image
    &__img {
        width: 100%;
        aspect-ratio: 1;
        border-radius: $gap - $padding;

        // Background image properties
        background-image: var(--placeholder, url('/assets/placeholder.svg'));
        background-size: cover;
        background-position: center;
        background-repeat: no-repeat;
    }

    // Item info container
    &__info {
        overflow-x: hidden;
        display: grid;
        gap: $padding;
    }

    // Common properties for info, title, and content
    &__info, &__title, &__content {
        max-width: 100%;
    }

    // Title and content styling
    &__title, &__content {
        margin-block: 0;
        margin-inline: auto;
        height: fit-content;
        text-align: center;
    }

    // Content-specific styling
    &__content {
        text-wrap: wrap;
        text-overflow: ellipsis;
    }
}