// Scroll timeline
html {
    scroll-timeline: --page-scroll block;
}

// Post layout variables
.post, .page-title:has(+ .post) {
    --pad: 1rem;
    --bor: 0.09375rem solid var(--color);

    box-sizing: border-box;
    margin-inline: auto;
    width: clamp(500px, 100%, 800px);
}

// Post borders
.page-title:has(+ .post), .post {
    @media (width > 1012px) {
        & {
            border-left: var(--bor);
            border-right: var(--bor);
        }
    }
}

// Post content
.post {
    gap: 0;

    // Info and post area padding
    .info, .post-area {
        padding: var(--pad);
    }

    // Post info section
    .info {
        margin: 0;
        border-bottom: var(--bor);
    }
    
    // Scroll progress indicator
    .scroll-percentage {
        --w: 0;
        --h: 10px;
    
        position: sticky;
        top: 0;
        left: 0;
        right: 0;
        height: calc(var(--h)*2);
    
        // Progress bar pseudo-elements
        &::before, &::after {
            content: '';
            position: absolute;
            inset: 0;
            height: var(--h);
            border-radius: 100dvw;
        }
        
        // Background bar
        &::before {
            background-color: lightgray;
            box-shadow: 0 calc(var(--h)/2) calc(var(--h)/2) 0 white;
        }
        
        // Progress bar
        &::after {
            width: 0;
            transform-origin: left;
            background-color: gray;
            animation: position auto linear;
            animation-timeline: --page-scroll;
            animation-range: normal;
        }
    }
    
    // Post content area
    .post-area {
        flex: 1;
        margin-bottom: var(--pad);
        border-bottom: var(--bor);

        // Post content styling
        .post-content {
            // Text wrapping
            > * {
                text-wrap: wrap;
            }
    
            // First child margin reset
            > :first-child {
                &, > :first-child {
                    margin-top: 0;
                }
            }
            
            // Last child margin reset
            > :last-child {
                &, > :last-child {
                    margin-bottom: 0;
                }
            }

            // Code block padding
            pre.astro-code:has( > code) {
                padding: var(--pad);
            }
        }
    }
}

// Scroll animation
@keyframes position {
    from {
        width: 0;
    }
    to {
        width: 100%;
    }
}
