---
// Imports
import '../styles/pages/[about, contact].scss'

import Layout from '../layouts/Layout.astro'

import Input from '../defaultComponents/Input.astro'
import TextArea from '../defaultComponents/TextArea.astro'

import type { FormConfig, FormField } from '../lib/types'
import type { HTMLAttributes } from 'astro/types'

// Extract input type from HTMLAttributes
type HTMLInputTypeAttribute = HTMLAttributes<'input'>['type']

// Configuration
// Form configuration
const formConfig: FormConfig = {
    action: "https://docs.google.com/forms/d/e/1FAIpQLSfleYNKUZ6MfijVAEwcIT1Gga4aOhrElpEdayw3_z_vLrs1GA/formResponse",
    method: "POST",
    className: "contact"
}

// Form field configurations
const formFields: Record<string, FormField> = {
    name: {
        type: "text" as const,
        name: "entry.183817893",
        id: "name",
        placeholder: "What's your name?",
        required: "TRUE",
        align: "left",
        label: "Name: "
    },
    email: {
        type: "email" as const,
        name: "entry.1021394857",
        id: "email",
        placeholder: "you@email.tld",
        required: "TRUE",
        align: "left",
        label: "Email: "
    },
    subject: {
        type: "honeypot" as const,
        label: "Subeject:",
        name: "",
        id: "subject",
        required: "FALSE"
    },
    message: {
        type: "textarea" as const,
        label: "Message:",
        name: "entry.1554105426",
        id: "message",
        placeholder: "Type here...",
        required: "TRUE"
    },
    submit: {
        type: "submit" as const,
        name: "submit",
        id: "submit",
        value: "Send",
        className: "contact-button",
        align: "right",
        style: "cursor: pointer; margin-left: auto;"
    }
}
---
<!-- Contact Page -->
<Layout title="Contact">
    <iframe name="hidden_iframe" style="display: none;"></iframe>
    <form action={formConfig.action} method={formConfig.method} class={formConfig.className} target="hidden_iframe">
        <Input
            type={formFields.name.type as HTMLInputTypeAttribute} 
            name={formFields.name.name} 
            id={formFields.name.id} 
            placeholder={formFields.name.placeholder} 
            required={formFields.name.required} 
            align={formFields.name.align as "left" | "right" | "center" | undefined}
        >
            {formFields.name.label}
        </Input>
                
        <Input 
            type={formFields.email.type as HTMLInputTypeAttribute} 
            name={formFields.email.name} 
            id={formFields.email.id} 
            placeholder={formFields.email.placeholder} 
            required={formFields.email.required} 
            align={formFields.email.align as "left" | "right" | "center" | undefined}
        >
            {formFields.email.label}
        </Input>
        
        <Input 
            type={formFields.subject.type as HTMLInputTypeAttribute} 
            name={formFields.subject.name} 
            id={formFields.subject.id} 
            required={formFields.subject.required} 
        >
            {formFields.subject.label}
        </Input>
        
        <TextArea 
            label={formFields.message.label}
            autosize={true}
            rows="1"
            name={formFields.message.name}
            id={formFields.message.id}
            placeholder={formFields.message.placeholder}
            required={formFields.message.required}
        />
        
        <Input 
            type={formFields.submit.type as HTMLInputTypeAttribute} 
            value={formFields.submit.value} 
            class={formFields.submit.className} 
            align={formFields.submit.align as "left" | "right" | "center" | undefined} 
            style={formFields.submit.style}
        />
    </form>
</Layout>